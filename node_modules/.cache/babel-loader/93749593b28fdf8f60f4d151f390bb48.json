{"ast":null,"code":"import _initializerDefineProperty from \"/Users/guzmle2/Desktop/938f2911-7c33-4df6-989a-01973076b39e/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty.js\";\nimport _applyDecoratedDescriptor from \"/Users/guzmle2/Desktop/938f2911-7c33-4df6-989a-01973076b39e/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor.js\";\nimport _initializerWarningHelper from \"/Users/guzmle2/Desktop/938f2911-7c33-4df6-989a-01973076b39e/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper.js\";\nvar _class, _descriptor, _descriptor2, _descriptor3;\n/* eslint-disable no-underscore-dangle */\nimport _ from 'lodash';\nimport { action, observable, runInAction } from 'mobx';\nlet ListService = (_class = class ListService {\n  constructor(getAPI) {\n    this.getAPI = void 0;\n    _initializerDefineProperty(this, \"found\", _descriptor, this);\n    _initializerDefineProperty(this, \"total\", _descriptor2, this);\n    _initializerDefineProperty(this, \"isLoading\", _descriptor3, this);\n    this.customizer = (objValue, srcValue) => {\n      if (_.isArray(objValue) && _.isObject(srcValue) && !_.isEmpty(srcValue)) {\n        return objValue.concat(srcValue);\n      }\n      return undefined;\n    };\n    this.getAPI = getAPI;\n    this.total = 0;\n  }\n  getFind() {}\n  parseJsonToInstance(json) {\n    return T;\n  }\n  reset() {\n    this.total = 0;\n    this.found = [];\n    this.isLoading = true;\n  }\n  async request() {\n    try {\n      this.isLoading = true;\n      const find = this.getFind();\n\n      // _.mergeWith(find, this.filters, this.customizer);\n\n      const {\n        data\n      } = await this.getAPI({\n        find\n      });\n      this.total = data.total;\n      runInAction(() => {\n        try {\n          this.found = data.found.map(item => this.parseJsonToInstance(item));\n        } catch (error) {\n          throw new Error(\"500 - Incorrect data type received from API: \".concat(error));\n        }\n        this.isLoading = false;\n      });\n    } catch (error) {\n      console.error(error);\n      runInAction(() => {\n        this.isLoading = false;\n      });\n    }\n  }\n}, (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"found\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return [];\n  }\n}), _descriptor2 = _applyDecoratedDescriptor(_class.prototype, \"total\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return 0;\n  }\n}), _descriptor3 = _applyDecoratedDescriptor(_class.prototype, \"isLoading\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return false;\n  }\n}), _applyDecoratedDescriptor(_class.prototype, \"reset\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"reset\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"request\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"request\"), _class.prototype)), _class);\nexport { ListService as default };","map":{"version":3,"names":["_","action","observable","runInAction","ListService","_class","constructor","getAPI","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","customizer","objValue","srcValue","isArray","isObject","isEmpty","concat","undefined","total","getFind","parseJsonToInstance","json","T","reset","found","isLoading","request","find","data","map","item","error","Error","console","_applyDecoratedDescriptor","prototype","configurable","enumerable","writable","initializer","Object","getOwnPropertyDescriptor","default"],"sources":["/Users/guzmle2/Desktop/938f2911-7c33-4df6-989a-01973076b39e/src/listService.ts"],"sourcesContent":["/* eslint-disable no-underscore-dangle */\nimport _ from 'lodash';\nimport { action, observable, runInAction } from 'mobx';\n\nexport default class ListService<T> {\n  getAPI: Function;\n\n  @observable found: Array<T> = [];\n\n  @observable total = 0;\n\n  @observable isLoading = false;\n\n\n  constructor(getAPI: Function) {\n    this.getAPI = getAPI;\n    this.total = 0;\n  }\n\n  getFind() {\n  };\n\n  parseJsonToInstance(json: any): T {\n    return T;\n  };\n\n  @action\n  reset(): void {\n    this.total = 0;\n    this.found = [];\n    this.isLoading = true;\n  }\n\n  protected customizer = (objValue: any, srcValue: any) => {\n    if (_.isArray(objValue) && _.isObject(srcValue) && !_.isEmpty(srcValue)) {\n      return objValue.concat(srcValue);\n    }\n    return undefined;\n  };\n\n  @action\n  async request(): Promise<void> {\n    try {\n      this.isLoading = true;\n      const find = this.getFind();\n\n      // _.mergeWith(find, this.filters, this.customizer);\n\n      const { data } = await this.getAPI({\n        find\n      });\n      this.total = data.total;\n\n      runInAction(() => {\n        try {\n          this.found = data.found.map((item: any) =>\n            this.parseJsonToInstance(item)\n          );\n        } catch (error) {\n          throw new Error(\n            `500 - Incorrect data type received from API: ${error}`\n          );\n        }\n\n        this.isLoading = false;\n      });\n    } catch (error) {\n      console.error(error);\n      runInAction(() => {\n        this.isLoading = false;\n      });\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
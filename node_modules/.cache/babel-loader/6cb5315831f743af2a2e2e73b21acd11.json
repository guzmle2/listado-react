{"ast":null,"code":"import _initializerDefineProperty from\"/Users/guzmle2/Desktop/938f2911-7c33-4df6-989a-01973076b39e/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty.js\";import _applyDecoratedDescriptor from\"/Users/guzmle2/Desktop/938f2911-7c33-4df6-989a-01973076b39e/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor.js\";import _initializerWarningHelper from\"/Users/guzmle2/Desktop/938f2911-7c33-4df6-989a-01973076b39e/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper.js\";var _class,_descriptor,_descriptor2,_descriptor3;/* eslint-disable no-underscore-dangle */import{action,observable,runInAction}from'mobx';let ListService=(_class=class ListService{constructor(getAPI){this.getAPI=void 0;_initializerDefineProperty(this,\"found\",_descriptor,this);_initializerDefineProperty(this,\"total\",_descriptor2,this);_initializerDefineProperty(this,\"isLoading\",_descriptor3,this);this.getAPI=getAPI;this.total=0;}getFind(){}parseJsonToInstance(json){return null;}reset(){this.total=0;this.found=[];this.isLoading=true;}async request(){try{this.isLoading=true;const find=this.getFind();// _.mergeWith(find, this.filters, this.customizer);\nconst{data}=await this.getAPI({find});this.total=data.total;runInAction(()=>{try{this.found=data.found.map(item=>this.parseJsonToInstance(item));}catch(error){throw new Error(\"500 - Incorrect data type received from API: \".concat(error));}this.isLoading=false;});}catch(error){console.error(error);runInAction(()=>{this.isLoading=false;});}}},(_descriptor=_applyDecoratedDescriptor(_class.prototype,\"found\",[observable],{configurable:true,enumerable:true,writable:true,initializer:function(){return[];}}),_descriptor2=_applyDecoratedDescriptor(_class.prototype,\"total\",[observable],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0;}}),_descriptor3=_applyDecoratedDescriptor(_class.prototype,\"isLoading\",[observable],{configurable:true,enumerable:true,writable:true,initializer:function(){return false;}}),_applyDecoratedDescriptor(_class.prototype,\"reset\",[action],Object.getOwnPropertyDescriptor(_class.prototype,\"reset\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"request\",[action],Object.getOwnPropertyDescriptor(_class.prototype,\"request\"),_class.prototype)),_class);export{ListService as default};","map":{"version":3,"names":["action","observable","runInAction","ListService","_class","constructor","getAPI","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","total","getFind","parseJsonToInstance","json","reset","found","isLoading","request","find","data","map","item","error","Error","concat","console","_applyDecoratedDescriptor","prototype","configurable","enumerable","writable","initializer","Object","getOwnPropertyDescriptor","default"],"sources":["/Users/guzmle2/Desktop/938f2911-7c33-4df6-989a-01973076b39e/src/listService.ts"],"sourcesContent":["/* eslint-disable no-underscore-dangle */\nimport _ from 'lodash';\nimport { action, observable, runInAction } from 'mobx';\n\nexport default class ListService<T> {\n  getAPI: Function;\n\n  @observable found: Array<T> = [];\n\n  @observable total = 0;\n\n  @observable isLoading = false;\n\n\n  constructor(getAPI: Function) {\n    this.getAPI = getAPI;\n    this.total = 0;\n  }\n\n  getFind() {\n  };\n\n  parseJsonToInstance(json: any): T {\n    return null;\n  };\n\n  @action\n  reset(): void {\n    this.total = 0;\n    this.found = [];\n    this.isLoading = true;\n  }\n\n  @action\n  async request(): Promise<void> {\n    try {\n      this.isLoading = true;\n      const find = this.getFind();\n\n      // _.mergeWith(find, this.filters, this.customizer);\n\n      const { data } = await this.getAPI({\n        find\n      });\n      this.total = data.total;\n\n      runInAction(() => {\n        try {\n          this.found = data.found.map((item: any) =>\n            this.parseJsonToInstance(item)\n          );\n        } catch (error) {\n          throw new Error(\n            `500 - Incorrect data type received from API: ${error}`\n          );\n        }\n\n        this.isLoading = false;\n      });\n    } catch (error) {\n      console.error(error);\n      runInAction(() => {\n        this.isLoading = false;\n      });\n    }\n  }\n}\n"],"mappings":"opBAAA,yCAEA,OAASA,MAAM,CAAEC,UAAU,CAAEC,WAAW,KAAQ,MAAM,CAAC,GAElC,CAAAC,WAAW,EAAAC,MAAA,CAAjB,KAAM,CAAAD,WAAe,CAUlCE,WAAWA,CAACC,MAAgB,CAAE,MAT9BA,MAAM,QAAAC,0BAAA,cAAAC,WAAA,OAAAD,0BAAA,cAAAE,YAAA,OAAAF,0BAAA,kBAAAG,YAAA,OAUJ,IAAI,CAACJ,MAAM,CAAGA,MAAM,CACpB,IAAI,CAACK,KAAK,CAAG,CAAC,CAChB,CAEAC,OAAOA,CAAA,CAAG,CACV,CAEAC,mBAAmBA,CAACC,IAAS,CAAK,CAChC,MAAO,KAAI,CACb,CAGAC,KAAKA,CAAA,CAAS,CACZ,IAAI,CAACJ,KAAK,CAAG,CAAC,CACd,IAAI,CAACK,KAAK,CAAG,EAAE,CACf,IAAI,CAACC,SAAS,CAAG,IAAI,CACvB,CAEA,KACM,CAAAC,OAAOA,CAAA,CAAkB,CAC7B,GAAI,CACF,IAAI,CAACD,SAAS,CAAG,IAAI,CACrB,KAAM,CAAAE,IAAI,CAAG,IAAI,CAACP,OAAO,CAAC,CAAC,CAE3B;AAEA,KAAM,CAAEQ,IAAK,CAAC,CAAG,KAAM,KAAI,CAACd,MAAM,CAAC,CACjCa,IACF,CAAC,CAAC,CACF,IAAI,CAACR,KAAK,CAAGS,IAAI,CAACT,KAAK,CAEvBT,WAAW,CAAC,IAAM,CAChB,GAAI,CACF,IAAI,CAACc,KAAK,CAAGI,IAAI,CAACJ,KAAK,CAACK,GAAG,CAAEC,IAAS,EACpC,IAAI,CAACT,mBAAmB,CAACS,IAAI,CAC/B,CAAC,CACH,CAAE,MAAOC,KAAK,CAAE,CACd,KAAM,IAAI,CAAAC,KAAK,iDAAAC,MAAA,CACmCF,KAAK,CACvD,CAAC,CACH,CAEA,IAAI,CAACN,SAAS,CAAG,KAAK,CACxB,CAAC,CAAC,CACJ,CAAE,MAAOM,KAAK,CAAE,CACdG,OAAO,CAACH,KAAK,CAACA,KAAK,CAAC,CACpBrB,WAAW,CAAC,IAAM,CAChB,IAAI,CAACe,SAAS,CAAG,KAAK,CACxB,CAAC,CAAC,CACJ,CACF,CACF,CAAC,EAAAT,WAAA,CAAAmB,yBAAA,CAAAvB,MAAA,CAAAwB,SAAA,UA3DE3B,UAAU,GAAA4B,YAAA,MAAAC,UAAA,MAAAC,QAAA,MAAAC,WAAA,SAAAA,CAAA,QAAmB,EAAE,KAAAvB,YAAA,CAAAkB,yBAAA,CAAAvB,MAAA,CAAAwB,SAAA,UAE/B3B,UAAU,GAAA4B,YAAA,MAAAC,UAAA,MAAAC,QAAA,MAAAC,WAAA,SAAAA,CAAA,QAAS,EAAC,KAAAtB,YAAA,CAAAiB,yBAAA,CAAAvB,MAAA,CAAAwB,SAAA,cAEpB3B,UAAU,GAAA4B,YAAA,MAAAC,UAAA,MAAAC,QAAA,MAAAC,WAAA,SAAAA,CAAA,QAAa,MAAK,KAAAL,yBAAA,CAAAvB,MAAA,CAAAwB,SAAA,UAe5B5B,MAAM,EAAAiC,MAAA,CAAAC,wBAAA,CAAA9B,MAAA,CAAAwB,SAAA,UAAAxB,MAAA,CAAAwB,SAAA,EAAAD,yBAAA,CAAAvB,MAAA,CAAAwB,SAAA,YAON5B,MAAM,EAAAiC,MAAA,CAAAC,wBAAA,CAAA9B,MAAA,CAAAwB,SAAA,YAAAxB,MAAA,CAAAwB,SAAA,GAAAxB,MAAA,SA7BYD,WAAW,IAAAgC,OAAA"},"metadata":{},"sourceType":"module"}